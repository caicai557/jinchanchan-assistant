# Feature Parity: S13 福星版本 vs jinchanchan-assistant

## 模块对比清单

### 1. UI 前端

| 功能 | S13福星版 | 当前状态 | 优先级 | 依赖 |
|------|-----------|----------|--------|------|
| 桌面 GUI (Qt5) | ✅ | ❌ 缺失 | P2 | 无 |
| Web Dashboard | ❌ | ❌ 缺失 | P2 | 无 |
| TUI 终端界面 | ❌ | ❌ 缺失 | P1 | 无 |
| 实时截图预览 | ✅ | ❌ 缺失 | P1 | UI框架 |
| 识别字段可视化 | ✅ | ❌ 缺失 | P1 | OCR/模板 |
| 动作队列显示 | ✅ | ❌ 缺失 | P1 | 决策引擎 |
| LLM Budget 显示 | ❌ | ❌ 缺失 | P1 | LLMClient |
| 错误计数器 | ✅ | ❌ 缺失 | P1 | 日志系统 |
| dry-run/live 切换 | ❌ | ❌ 缺失 | P1 | CLI |

### 2. 双端适配

| 功能 | S13福星版 | 当前状态 | 优先级 | 依赖 |
|------|-----------|----------|--------|------|
| Windows 模拟器 (ADB) | ✅ | ✅ 已实现 | - | - |
| Mac PlayCover | ❌ | ✅ 已实现 | - | - |
| 多模拟器支持 | ✅ | ✅ 已实现 | - | - |
| 自动检测模拟器端口 | ✅ | ✅ 已实现 | - | - |

### 3. 窗口发现/截图

| 功能 | S13福星版 | 当前状态 | 优先级 | 依赖 |
|------|-----------|----------|--------|------|
| 窗口标题匹配 | ✅ | ✅ 已实现 | - | - |
| 多候选窗口名 | ✅ | ✅ 已实现 | - | - |
| 窗口调试模式 | ❌ | ❌ 缺失 | P0 | 无 |
| 正则匹配规则 | ❌ | ❌ 缺失 | P1 | 窗口调试 |
| 可见性检测 | ✅ | ⚠️ 部分 | P1 | 窗口调试 |
| Retina 缩放 | ❌ | ✅ 已实现 | - | - |
| mss 截图 | ❌ | ✅ 已实现 | - | - |

### 4. OCR/模板识别

| 功能 | S13福星版 | 当前状态 | 优先级 | 依赖 |
|------|-----------|----------|--------|------|
| PaddleOCR v3 | ✅ | ⚠️ RapidOCR | - | - |
| 模板匹配库 | ✅ 99张 | ❌ 缺失 | P0 | 无 |
| YOLO 目标检测 | ✅ | ❌ 缺失 | P2 | 训练数据 |
| SoM 标注 | ❌ | ✅ 已实现 | - | - |
| 英雄识别 | ✅ | ⚠️ 仅JSON | P1 | 模板库 |
| 装备识别 | ✅ | ❌ 缺失 | P1 | 模板库 |
| 羁绊识别 | ✅ | ❌ 缺失 | P1 | 模板库 |

### 5. 规则/LLM 决策

| 功能 | S13福星版 | 当前状态 | 优先级 | 依赖 |
|------|-----------|----------|--------|------|
| 脚本规则引擎 | ✅ | ✅ 已实现 | - | - |
| LLM 多提供商 | ❌ | ✅ 已实现 | - | - |
| Gemini 支持 | ❌ | ✅ 已实现 | - | - |
| 预算控制 | ❌ | ✅ 已实现 | - | - |
| 重试/超时 | ❌ | ✅ 已实现 | - | - |
| dry-run 模式 | ❌ | ✅ 已实现 | - | - |

### 6. 动作执行

| 功能 | S13福星版 | 当前状态 | 优先级 | 依赖 |
|------|-----------|----------|--------|------|
| 点击/拖拽 | ✅ | ✅ 已实现 | - | - |
| 拟人化延迟 | ✅ | ✅ 已实现 | - | - |
| 坐标配置 | ✅ | ✅ 已实现 | - | - |
| 多分辨率适配 | ✅ | ❌ 缺失 | P0 | 无 |

### 7. 日志/回放

| 功能 | S13福星版 | 当前状态 | 优先级 | 依赖 |
|------|-----------|----------|--------|------|
| 操作日志 | ✅ | ✅ 已实现 | - | - |
| 脚本录制 | ✅ | ❌ 缺失 | P2 | 无 |
| 脚本回放 | ✅ | ❌ 缺失 | P2 | 录制 |
| 统计面板 | ✅ | ⚠️ 终端 | P1 | UI |

### 8. 配置管理

| 功能 | S13福星版 | 当前状态 | 优先级 | 依赖 |
|------|-----------|----------|--------|------|
| INI 配置 | ✅ | ❌ YAML | - | - |
| 热键控制 | ✅ F8/F10 | ❌ 缺失 | P2 | pynput |
| CLI 参数 | ❌ | ✅ 已实现 | - | - |
| 环境变量 | ❌ | ✅ 已实现 | - | - |

---

## 优先级定义

- **P0**: 阻塞真实运行，必须立即解决
- **P1**: 影响可用性，本迭代解决
- **P2**: 功能增强，后续迭代

---

## 依赖关系图

```
窗口调试模式 (P0)├── 多分辨率适配 (P0)
└── UI 框架 (P1)
    ├── 截图预览
    ├── 识别可视化
    └── 动作队列

模板库 (P0)
├── 英雄识别 (P1)
├── 装备识别 (P1)
└── 羁绊识别 (P1)
```

---

## 当前迭代目标

1. ✅ LLM 可观测性 (budget/retry/timeout/logging)
2. ✅ Gemini 接入 main.py
3. ✅ dry-run 模式
4. 🔄 窗口调试模式 (--debug-window)
5. 🔄 TUI 最小界面 (--ui tui)
6. ⏳ 模板库建设
7. ⏳ 多分辨率适配
